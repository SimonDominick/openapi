# API文档
## 安全认证
AccessKey为API 访问密钥，SecretKey为用户对请求进行签名的密钥。
重要提示：这两个密钥与账号安全紧密相关，无论何时都请勿向其它人透露
## 合法请求结构
基于安全考虑，除行情API 外的 API 请求都必须进行签名运算。一个合法的请求由以下几部分组成：<br>
方法请求地址,即访问服务器地址：devppl后面跟上方法名，比如hkapi.hotcoin.top/v1/order/place。<br>
API 访问密钥（AccessKeyId） 您申请的 APIKEY 中的AccessKey。<br>
签名方法（SignatureMethod） 用户计算签名的基于哈希的协议，此处使用 HmacSHA256。<br>
签名版本（SignatureVersion） 签名协议的版本，此处使用2。<br>
时间戳（Timestamp） 您发出请求的时间 (UTC 时区)。在查询请求中包含此值有助于防止第三方截取您的请求。如：2017-05-11T16:22:06.123Z。再次强调是 (UTC 时区)  <br>
调用的必需参数和可选参数。可以在每个方法的说明中查看这些参数及其含义。签名计算得出的值，用于确保签名有效和未被篡改。 <br>
例：<br>
https://hkapi.hotcoin.top/v1/order/place? <br>
AccessKeyId=AccessKeyHotcoin123456789 <br>
&symbol=btc_gavc <br>
&type=buy <br>
&tradePrice=40000 <br>
&tradeAmount=0.1 <br>
&SignatureMethod=HmacSHA256 <br>
&SignatureVersion=2 <br>
&Timestamp=2017-05-11T16:22:06.123Z<br>
&Signature=calculated value <br>
## 签名运算
API 请求在通过 Internet 发送的过程中极有可能被篡改。为了确保请求未被更改，我们会要求用户在每个请求中带上签名，来校验参数或参数值在传输途中是否发生了更改。<br>

计算签名所需的步骤：<br>
规范要计算签名的请求 <br>
因为使用 HMAC 进行签名计算时，使用不同内容计算得到的结果会完全不同。所以在进行签名计算前，请先对请求进行规范化处理。下面以下单请求为例进行说明 <br>

https://hkapi.hotcoin.top/v1/order/place? <br>
AccessKeyId=AccessKeyHotcoin123456789 <br>
&SignatureMethod=HmacSHA256 <br>
&SignatureVersion=2 <br>
&Timestamp=2017-05-11T16:22:06.123Z <br>
&symbol=btc_gavc <br>
&type=buy <br>
&tradePrice=40000 <br>
&tradeAmount=0.1 <br>

请求方法（GET 或 POST），后面添加换行符\n。 <br>

GET\n <br>

添加小写的访问地址，后面添加换行符\n。 <br>

hkapi.hotcoin.top\n <br>

访问方法的路径，后面添加换行符\n。<br>

/v1/order/place\n <br>

按照ASCII码的顺序对参数名进行排序(使用 UTF-8 编码，且进行了 URI 编码，十六进制字符必须大写，如‘:’会被编码为'%3A'，空格被编码为'%20')。<br>
例如，下面是请求参数的原始顺序，进行过编码后。<br>

AccessKeyId=AccessKeyHotcoin123456789 <br>
&SignatureMethod=HmacSHA256 <br>
&SignatureVersion=2 <br>
&Timestamp=2017-05-11T16:22:06.123Z <br>
&symbol=btc_gavc <br>
&type=buy <br>
&tradePrice=40000 <br>
&tradeAmount=0.1 <br>

这些参数会被排序为：<br>

AccessKeyId=AccessKeyHotcoin123456789 <br>
SignatureMethod=HmacSHA256 <br>
SignatureVersion=2 <br>
Timestamp=2017-05-11T16%3A22%3A06.123Z& <br>
symbol=btc_gavc <br>
tradeAmount=0.01 <br>
tradePrice=40000 <br>
type=buy <br>

按照以上顺序，将各参数使用字符’&’连接。<br>

AccessKeyId=AccessKeyHotcoin123456789&id=1234567890&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2017-05-11T16%3A22%3A06.123Z&symbol=btc_gavc&tradeAmount=0.1&tradePrice=40000&type=buy <br>

组成最终的要进行签名计算的字符串如下：<br>

GET\n <br>
hkapi.hotcoin.top\n <br>
/v1/order/place\n <br>
AccessKeyId=AccessKeyHotcoin123456789&id=1234567890&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2017-05-11T16%3A22%3A06.123Z&symbol=btc_gavc&tradeAmount=0.1&tradePrice=40000&type=buy <br>

计算签名，将以下两个参数传入加密哈希函数： <br>
要进行签名计算的字符串 <br>

GET\n <br>
hkapi.hotcoin.top\n <br>
/v1/order/place\n <br>
AccessKeyId=AccessKeyHotcoin123456789&id=1234567890&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2017-05-11T16%3A22%3A06.123Z&symbol=btc_gavc&tradeAmount=0.1&tradePrice=40000&type=buy <br>

进行签名的密钥（SecretKey）<br>

SecretKeyHotcoin123456789 <br>

得到签名计算结果并进行 Base64编码 <br>

2oEC+yhkHTsNkgPUq4ZB/5mlY7EZAtUDWOQ5EO01D+I= <br>

将上述值作为参数Signature的取值添加到 API 请求中。 将此参数添加到请求时，必须将该值进行 URI 编码。<br>
最终，发送到服务器的 API 请求应该为：<br>

https://hotcoin.top/v1/order/place?AccessKeyId=AccessKeyHotcoin123456789&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2017-05-11T16%3A22%3A06.123Z&symbol=btc_gavc&tradeAmount=0.1&tradePrice=40000&type=buy&Signature=2oEC%2ByhkHTsNkgPUq4ZB%2F5mlY7EZAtUDWOQ5EO01D%2BI%3D <br>

symbol 规则： 基础币种+计价币种。如BTC/USDT，symbol为btc_usdt；ETH/BTC， symbol为eth_btc。以此类推。<br>

## 接口列表

### 订单相关
- [下单 /api/v1/perpetual/products/{contractCode}/order](#下单)
- [订单列表 /api/v1/perpetual/products/{contractCode}/list](#订单列表)
- [撤单 /api/v1/perpetual/products/{contractCode}/order/{id}](#撤单)
- [批量撤单 /api/v1/perpetual/products/{contractCode}/orders](#批量撤单)
- [订单详情 /api/v1/perpetual/products/{contractCode}/{id}](#订单详情)

### 账户相关
- [我的资产 /api/v1/perpetual/account/assets/{contractCode}](#我的资产)
- [订单列表 /api/v1/perpetual/account/{contractCode}/list](#订单列表)
- [撤单 /api/v1/perpetual/account/{contractCode}/order/{id}](#撤单)
- [批量撤单 /api/v1/perpetual/account/{contractCode}/orders](#批量撤单)
- [订单详情 /api/v1/perpetual/account/{contractCode}/{id}](#订单详情)

## api明细

### 下单

#### POST /api/v1/perpetual/products/{contractCode}/order

#### 请求参数：

##### 路径参数
参数名称|是否必须|类型|描述|默认值|取值范围
------------- | ------------- |  ------------- | ------------- |  ------------- | -------------
contractCode|y|string|合约code||

##### Query
参数名称|是否必须|类型|描述|默认值|取值范围
------------- | ------------- |  ------------- | ------------- |  ------------- | -------------
AccessKeyId|y|string|访问key||
SignatureVersion|y|string|版本
SignatureMethod|y|string|签名方法||HmacSHA256
Signature|y|string|ApiSecret||
Timestamp|y|string|时间戳||

##### Body(json)
参数名称|是否必须|类型|描述|默认值|取值范围
------------- | ------------- |  ------------- | ------------- |  ------------- | -------------
type|y|string|类型||10 限价或条件单 11 市价 
triggerBy|n|string|触发类型||条件单选项，如果不是条件单此字段必须为NULL，指数价格：index，标记价格：mark，最新价格：last
triggerPrice|n|string|条件单选项 触发价
side|y|string|方向||open_long 开多 open_short 开空 close_long 平多 close_short 平空
price|y|string|价格||
amount|y|int|数量||
beMaker|n|int|时间戳|0|被动委托：0:不被动委托 1:被动委托

#### 返回：
参数名称|是否必须|类型|描述|默认值|取值范围
------------- | ------------- |  ------------- | ------------- |  ------------- | -------------
id|y|long|订单id||


#### 返回json

```json
{
   "id": "1237893454356"
}
```


### 订单列表

#### GET /api/v1/perpetual/products/{contractCode}/list

请求参数：

#### 请求参数：

##### 路径参数
参数名称|是否必须|类型|描述|默认值|取值范围
------------- | ------------- |  ------------- | ------------- |  ------------- | -------------
contractCode|y|string|合约code||

##### Query
参数名称|是否必须|类型|描述|默认值|取值范围
------------- | ------------- |  ------------- | ------------- |  ------------- | -------------
AccessKeyId|y|string|访问key||
SignatureVersion|y|string|版本
SignatureMethod|y|string|签名方法||HmacSHA256
Signature|y|string|ApiSecret||
Timestamp|y|string|时间戳||

##### Body(json)
参数名称|是否必须|类型|描述|默认值|取值范围
------------- | ------------- |  ------------- | ------------- |  ------------- | -------------
type|y|string|类型||10 限价或条件单 11 市价 
triggerBy|n|string|触发类型||条件单选项，如果不是条件单此字段必须为NULL，指数价格：index，标记价格：mark，最新价格：last
triggerPrice|n|string|条件单选项 触发价
side|y|string|方向||open_long 开多 open_short 开空 close_long 平多 close_short 平空
price|y|string|价格||
amount|y|int|数量||
beMaker|n|int|时间戳|0|被动委托：0:不被动委托 1:被动委托


#### 返回：

参数名称|是否必须|类型|描述|默认值|取值范围
------------- | ------------- |  ------------- | ------------- |  ------------- | -------------
amount|y|string|数量||
avgPrice|y|string|平均成交价||
base|y|string|基础货币名,如btc、fbtc||
contractCode|y|string|是Base和Quote之间的组合 P_BTC_USDT，R_BTC_USDT||
contractDirection|y|int|合约方向 0:正向,1:反向||
createdDate|y|string|创建时间||
dealAmount|y|string|已成交数量||
detailSide|y|string|订单方向 1.开多open_long 2.开空open_short 3.平多close_long 4.平空close_short||
direction|y|string|条件单：触发方向，greater大于，less小于||
fee|y|string|该笔订单成交后交的手续费: 正表示得手续费,负表示付手续费||
id|y|long|订单id||
orderSize|y|string|订单价值||
price|y|string|委托价格||
profit|y|string|该笔订单成交后对应的盈亏: 正表示盈利,负表示亏损||
quote|y|string|计价货币名，usd,cny,usdt||
reason|y|int|该笔订单取消的理由，0是默认值，没有理由||
refConditionOrderId|y|long|条件单id||
refOrderCondition|y|object|条件单详情||
side|y|string|订单方向，long多，short空||
source|y|string|来源||
status|y|int|状态||
systemType|y|int|10:限价 11:市价 13:强平单 14:爆仓单 15：穿仓 16：强减||
triggerBy|y|string|条件单触发类型，指数价格：index，标记价格：mark，最新价格：last||
triggerPrice|y|string|条件单触发价格||

#### 返回json

```json
[
    {
        "amount": "300.0000000000000000",
        "avgPrice": "0E-16",
        "base": "",
        "contractCode": "fbtcusd",
        "contractDirection": 0,
        "createdDate": 1582225542000,
        "dealAmount": "0E-16",
        "detailSide": "open_long",
        "direction": "",
        "fee": "0E-16",
        "id": 69109290623152,
        "orderSize": "0.32258064",
        "price": "9300.0000000000000000",
        "profit": "0E-16",
        "quote": "",
        "reason": 0,
        "refConditionOrderId": 0,
        "refOrderCondition": null,
        "side": "long",
        "source": "",
        "status": 0,
        "systemType": 10,
        "triggerBy": "",
        "triggerPrice": ""
    }
]
```



### 撤单

#### DELETE /api/v1/perpetual/products/{contractCode}/order/{id}

请求参数：

#### 请求参数：

##### 路径参数
参数名称|是否必须|类型|描述|默认值|取值范围
------------- | ------------- |  ------------- | ------------- |  ------------- | -------------
contractCode|y|string|合约code||
id|y|long|订单id||

##### Query
参数名称|是否必须|类型|描述|默认值|取值范围
------------- | ------------- |  ------------- | ------------- |  ------------- | -------------
AccessKeyId|y|string|访问key||
SignatureVersion|y|string|版本
SignatureMethod|y|string|签名方法||HmacSHA256
Signature|y|string|ApiSecret||
Timestamp|y|string|时间戳||

#### 返回：

参数名称|是否必须|类型|描述|默认值|取值范围
------------- | ------------- |  ------------- | ------------- |  ------------- | -------------
code|y|int|状态，200：成功||
msg|y|string|提示||
data|y|object|||

#### 返回json

```json
{
    "code": 200,
    "msg": "success",
    "data": null,
}
```


### 批量撤单

#### DELETE /api/v1/perpetual/products/{contractCode}/orders

请求参数：

#### 请求参数：

##### 路径参数
参数名称|是否必须|类型|描述|默认值|取值范围
------------- | ------------- |  ------------- | ------------- |  ------------- | -------------
contractCode|y|string|合约code||
id|y|long|订单id||

##### Query
参数名称|是否必须|类型|描述|默认值|取值范围
------------- | ------------- |  ------------- | ------------- |  ------------- | -------------
AccessKeyId|y|string|访问key||
SignatureVersion|y|string|版本
SignatureMethod|y|string|签名方法||HmacSHA256
Signature|y|string|ApiSecret||
Timestamp|y|string|时间戳||

#### 返回：

参数名称|是否必须|类型|描述|默认值|取值范围
------------- | ------------- |  ------------- | ------------- |  ------------- | -------------
code|y|int|状态，200：成功||
msg|y|string|提示||
data|y|object|||

#### 返回json

```json
{
    "code": 200,
    "msg": "success",
    "data": null,
}
```


### 订单详情

#### GET /api/v1/perpetual/products/{contractCode}/{id}

请求参数：

#### 请求参数：

##### 路径参数
参数名称|是否必须|类型|描述|默认值|取值范围
------------- | ------------- |  ------------- | ------------- |  ------------- | -------------
contractCode|y|string|合约code||
id|y|long|订单id||

##### Query
参数名称|是否必须|类型|描述|默认值|取值范围
------------- | ------------- |  ------------- | ------------- |  ------------- | -------------
AccessKeyId|y|string|访问key||
SignatureVersion|y|string|版本
SignatureMethod|y|string|签名方法||HmacSHA256
Signature|y|string|ApiSecret||
Timestamp|y|string|时间戳||

#### 返回：

参数名称|是否必须|类型|描述|默认值|取值范围
------------- | ------------- |  ------------- | ------------- |  ------------- | -------------
amount|y|string|数量||
avgPrice|y|string|平均成交价||
base|y|string|基础货币名,如btc、fbtc||
contractCode|y|string|是Base和Quote之间的组合 P_BTC_USDT，R_BTC_USDT||
contractDirection|y|int|合约方向 0:正向,1:反向||
createdDate|y|string|创建时间||
dealAmount|y|string|已成交数量||
detailSide|y|string|订单方向 1.开多open_long 2.开空open_short 3.平多close_long 4.平空close_short||
direction|y|string|条件单：触发方向，greater大于，less小于||
fee|y|string|该笔订单成交后交的手续费: 正表示得手续费,负表示付手续费||
id|y|long|订单id||
orderSize|y|string|订单价值||
price|y|string|委托价格||
profit|y|string|该笔订单成交后对应的盈亏: 正表示盈利,负表示亏损||
quote|y|string|计价货币名，usd,cny,usdt||
reason|y|int|该笔订单取消的理由，0是默认值，没有理由||
refConditionOrderId|y|long|条件单id||
refOrderCondition|y|object|条件单详情||
side|y|string|订单方向，long多，short空||
source|y|string|来源||
status|y|int|状态||
systemType|y|int|10:限价 11:市价 13:强平单 14:爆仓单 15：穿仓 16：强减||
triggerBy|y|string|条件单触发类型，指数价格：index，标记价格：mark，最新价格：last||
triggerPrice|y|string|条件单触发价格||

#### 返回json

```json
{
    "amount": "300.0000000000000000",
    "avgPrice": "0E-16",
    "base": "",
    "contractCode": "fbtcusd",
    "contractDirection": 0,
    "createdDate": 1582225542000,
    "dealAmount": "0E-16",
    "detailSide": "open_long",
    "direction": "",
    "fee": "0E-16",
    "id": 69109290623152,
    "orderSize": "0.32258064",
    "price": "9300.0000000000000000",
    "profit": "0E-16",
    "quote": "",
    "reason": 0,
    "refConditionOrderId": 0,
    "refOrderCondition": null,
    "side": "long",
    "source": "",
    "status": 0,
    "systemType": 10,
    "triggerBy": "",
    "triggerPrice": ""
}
```

### 我的资产

#### GET /api/v1/perpetual/account/assets/{contractCode}

请求参数：

#### 请求参数：

##### 路径参数
参数名称|是否必须|类型|描述|默认值|取值范围
------------- | ------------- |  ------------- | ------------- |  ------------- | -------------
contractCode|y|string|合约code||

##### Query
参数名称|是否必须|类型|描述|默认值|取值范围
------------- | ------------- |  ------------- | ------------- |  ------------- | -------------
AccessKeyId|y|string|访问key||
SignatureVersion|y|string|版本
SignatureMethod|y|string|签名方法||HmacSHA256
Signature|y|string|ApiSecret||
Timestamp|y|string|时间戳||

##### Body(json)
参数名称|是否必须|类型|描述|默认值|取值范围
------------- | ------------- |  ------------- | ------------- |  ------------- | -------------
type|y|string|类型||10 限价或条件单 11 市价 
triggerBy|n|string|触发类型||条件单选项，如果不是条件单此字段必须为NULL，指数价格：index，标记价格：mark，最新价格：last
triggerPrice|n|string|条件单选项 触发价
side|y|string|方向||open_long 开多 open_short 开空 close_long 平多 close_short 平空
price|y|string|价格||
amount|y|int|数量||
beMaker|n|int|时间戳|0|被动委托：0:不被动委托 1:被动委托


#### 返回：

参数名称|是否必须|类型|描述|默认值|取值范围
------------- | ------------- |  ------------- | ------------- |  ------------- | -------------
currencyCode|y|string|币种||
env|y|int|是否测试币 0:线上币,1:测试币||
availableMargin|y|string|可用保证金||
realizedSurplus|y|string|已实现盈亏||
orderMargin|y|string|委托保证金||
positionMargin|y|string|仓位保证金||

#### 返回json

```json
{
    "availableMargin": "10.41549216",
    "currencyCode": "FBTC",
    "currentOrderMargin": "0",
    "env": 1,
    "orderMargin": "-0.57251225",
    "positionMargin": "0",
    "realizedSurplus": "-0.15702008"
}
```

